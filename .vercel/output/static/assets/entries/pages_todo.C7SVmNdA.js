import{r as R,j as p,i as N,o as I,L as _,a as k,b as q}from"../chunks/chunk-CVHMKzXD.js";import{u as $}from"../chunks/chunk-DyrwNzTt.js";/* empty css                      */import"../chunks/chunk-25N4ygma.js";/* empty css                      */function H(e){return e}function B(e){return e.length===0?H:e.length===1?e[0]:function(r){return e.reduce((t,i)=>i(t),r)}}function C(e){const n={subscribe(r){let t=null,i=!1,a=!1,u=!1;function l(){if(t===null){u=!0;return}a||(a=!0,typeof t=="function"?t():t&&t.unsubscribe())}return t=e({next(o){var s;i||(s=r.next)==null||s.call(r,o)},error(o){var s;i||(i=!0,(s=r.error)==null||s.call(r,o),l())},complete(){var o;i||(i=!0,(o=r.complete)==null||o.call(r),l())}}),u&&l(),{unsubscribe:l}},pipe(...r){return B(r)(n)}};return n}function M(e){return n=>{let r=0,t=null;const i=[];function a(){t||(t=n.subscribe({next(l){var o;for(const s of i)(o=s.next)==null||o.call(s,l)},error(l){var o;for(const s of i)(o=s.error)==null||o.call(s,l)},complete(){var l;for(const o of i)(l=o.complete)==null||l.call(o)}}))}function u(){if(r===0&&t){const l=t;t=null,l.unsubscribe()}}return{subscribe(l){return r++,i.push(l),a(),{unsubscribe(){r--,u();const o=i.findIndex(s=>s===l);o>-1&&i.splice(o,1)}}}}}}class A extends Error{constructor(n){super(n),this.name="ObservableAbortError",Object.setPrototypeOf(this,A.prototype)}}function F(e){let n;return{promise:new Promise((t,i)=>{let a=!1;function u(){a||(a=!0,i(new A("This operation was aborted.")),l.unsubscribe())}const l=e.subscribe({next(o){a=!0,t(o),u()},error(o){a=!0,i(o),u()},complete(){a=!0,u()}});n=u}),abort:n}}function V(e){return C(n=>{function r(i=0,a=e.op){const u=e.links[i];if(!u)throw new Error("No more links to execute - did you forget to add an ending link?");return u({op:a,next(o){return r(i+1,o)}})}return r().subscribe(n)})}function O(e){const n=Object.create(null);for(const r in e){const t=e[r];n[t]=r}return n}const U={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};O(U);O(U);const D=()=>{};function v(e,n){return new Proxy(D,{get(t,i){if(!(typeof i!="string"||i==="then"))return v(e,[...n,i])},apply(t,i,a){const u=n[n.length-1]==="apply";return e({args:u?a.length>=2?a[1]:[]:a,path:u?n.slice(0,-1):n})}})}const J=e=>v(e,[]),Y=e=>new Proxy(D,{get(n,r){if(!(typeof r!="string"||r==="then"))return e(r)}});function G(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class Q extends Error{}function K(e){if(e instanceof Error)return e;const n=typeof e;if(!(n==="undefined"||n==="function"||e===null)){if(n!=="object")return new Error(String(e));if(G(e)){const r=new Q;for(const t in e)r[t]=e[t];return r}}}function x(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function Z(e,n){if("error"in e){const t=n.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:t}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:n.transformer.deserialize(e.result.data)}}}}class E extends Error{constructor(){super("Unable to transform response from server")}}function W(e,n){let r;try{r=Z(e,n)}catch{throw new E}if(!r.ok&&(!x(r.error.error)||typeof r.error.error.code!="number"))throw new E;if(r.ok&&!x(r.result))throw new E;return r}function X(e){return e instanceof b||e instanceof Error&&e.name==="TRPCClientError"}function ee(e){return x(e)&&x(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class b extends Error{static from(n,r={}){const t=n;return X(t)?(r.meta&&(t.meta={...t.meta,...r.meta}),t):ee(t)?new b(t.error.message,{...r,result:t}):t instanceof Error?new b(t.message,{...r,cause:K(t)}):new b("Unknown error",{...r,cause:t})}constructor(n,r){var i,a;const t=r==null?void 0:r.cause;super(n,{cause:t}),this.meta=r==null?void 0:r.meta,this.cause=t,this.shape=(i=r==null?void 0:r.result)==null?void 0:i.error,this.data=(a=r==null?void 0:r.result)==null?void 0:a.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,b.prototype)}}const j=e=>typeof e=="function";function te(e){if(e)return e;if(typeof window<"u"&&j(window.fetch))return window.fetch;if(typeof globalThis<"u"&&j(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function re(e){return e||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function ne(e){return{url:e.url.toString().replace(/\/$/,""),fetch:e.fetch,AbortController:re(e.AbortController)}}function oe(e){const n={};for(let r=0;r<e.length;r++){const t=e[r];n[r]=t}return n}const ie={query:"GET",mutation:"POST"};function z(e){return"input"in e?e.runtime.transformer.serialize(e.input):oe(e.inputs.map(n=>e.runtime.transformer.serialize(n)))}const L=e=>{let n=e.url+"/"+e.path;const r=[];if("inputs"in e&&r.push("batch=1"),e.type==="query"){const t=z(e);t!==void 0&&r.push(`input=${encodeURIComponent(JSON.stringify(t))}`)}return r.length&&(n+="?"+r.join("&")),n},ue=e=>{if(e.type==="query")return;const n=z(e);return n!==void 0?JSON.stringify(n):void 0},ae=e=>le({...e,contentTypeHeader:"application/json",getUrl:L,getBody:ue});async function se(e,n){const r=e.getUrl(e),t=e.getBody(e),{type:i}=e,a=await e.headers();/* istanbul ignore if -- @preserve */if(i==="subscription")throw new Error("Subscriptions should use wsLink");const u={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...a};return te(e.fetch)(r,{method:ie[i],signal:n==null?void 0:n.signal,body:t,headers:u})}function le(e){const n=e.AbortController?new e.AbortController:null,r={};let t=!1;return{promise:new Promise((u,l)=>{se(e,n).then(o=>(r.response=o,t=!0,o.json())).then(o=>{r.responseJSON=o,u({json:o,meta:r})}).catch(o=>{t=!0,l(b.from(o,{meta:r}))})}),cancel:()=>{t||n==null||n.abort()}}}const P=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function S(e){let n=null,r=null;const t=()=>{clearTimeout(r),r=null,n=null};function i(l){var T,h;const o=[[]];let s=0;for(;;){const f=l[s];if(!f)break;const d=o[o.length-1];if(f.aborted){(T=f.reject)==null||T.call(f,new Error("Aborted")),s++;continue}if(e.validate(d.concat(f).map(c=>c.key))){d.push(f),s++;continue}if(d.length===0){(h=f.reject)==null||h.call(f,new Error("Input is too big for a single dispatch")),s++;continue}o.push([])}return o}function a(){const l=i(n);t();for(const o of l){if(!o.length)continue;const s={items:o,cancel:P};for(const d of o)d.batch=s;const T=(d,m)=>{var y;const c=s.items[d];(y=c.resolve)==null||y.call(c,m),c.batch=null,c.reject=null,c.resolve=null},{promise:h,cancel:f}=e.fetch(s.items.map(d=>d.key),T);s.cancel=f,h.then(d=>{var m;for(let c=0;c<d.length;c++){const y=d[c];T(c,y)}for(const c of s.items)(m=c.reject)==null||m.call(c,new Error("Missing result")),c.batch=null}).catch(d=>{var m;for(const c of s.items)(m=c.reject)==null||m.call(c,d),c.batch=null})}}function u(l){const o={aborted:!1,key:l,batch:null,resolve:P,reject:P},s=new Promise((h,f)=>{o.reject=f,o.resolve=h,n||(n=[]),n.push(o)});return r||(r=setTimeout(a)),{promise:s,cancel:()=>{var h;o.aborted=!0,(h=o.batch)!=null&&h.items.every(f=>f.aborted)&&(o.batch.cancel(),o.batch=null)}}}return{load:u}}function ce(e){return function(r){const t=ne(r),i=r.maxURLLength??1/0;return a=>{const u=h=>{const f=m=>{if(i===1/0)return!0;const c=m.map(w=>w.path).join(","),y=m.map(w=>w.input);return L({...t,runtime:a,type:h,path:c,inputs:y}).length<=i},d=e({...t,runtime:a,type:h,opts:r});return{validate:f,fetch:d}},l=S(u("query")),o=S(u("mutation")),s=S(u("subscription")),T={query:l,subscription:s,mutation:o};return({op:h})=>C(f=>{const d=T[h.type],{promise:m,cancel:c}=d.load(h);let y;return m.then(g=>{y=g;const w=W(g.json,a);if(!w.ok){f.error(b.from(w.error,{meta:g.meta}));return}f.next({context:g.meta,result:w.result}),f.complete()}).catch(g=>{f.error(b.from(g,{meta:y==null?void 0:y.meta}))}),()=>{c()}})}}}const fe=e=>n=>{const r=n.map(u=>u.path).join(","),t=n.map(u=>u.input),{promise:i,cancel:a}=ae({...e,path:r,inputs:t,headers(){return e.opts.headers?typeof e.opts.headers=="function"?e.opts.headers({opList:n}):e.opts.headers:{}}});return{promise:i.then(u=>(Array.isArray(u.json)?u.json:n.map(()=>u.json)).map(s=>({meta:u.meta,json:s}))),cancel:a}},de=ce(fe);class he{$request({type:n,input:r,path:t,context:i={}}){return V({links:this.links,op:{id:++this.requestId,type:n,path:t,input:r,context:i}}).pipe(M())}requestAsPromise(n){const r=this.$request(n),{promise:t,abort:i}=F(r);return new Promise((u,l)=>{var o;(o=n.signal)==null||o.addEventListener("abort",i),t.then(s=>{u(s.result.data)}).catch(s=>{l(b.from(s))})})}query(n,r,t){return this.requestAsPromise({type:"query",path:n,input:r,context:t==null?void 0:t.context,signal:t==null?void 0:t.signal})}mutation(n,r,t){return this.requestAsPromise({type:"mutation",path:n,input:r,context:t==null?void 0:t.context,signal:t==null?void 0:t.signal})}subscription(n,r,t){return this.$request({type:"subscription",path:n,input:r,context:t==null?void 0:t.context}).subscribe({next(a){var u,l,o;a.result.type==="started"?(u=t.onStarted)==null||u.call(t):a.result.type==="stopped"?(l=t.onStopped)==null||l.call(t):(o=t.onData)==null||o.call(t,a.result.data)},error(a){var u;(u=t.onError)==null||u.call(t,a)},complete(){var a;(a=t.onComplete)==null||a.call(t)}})}constructor(n){this.requestId=0;const r=(()=>{const t=n.transformer;return t?"input"in t?n.transformer:{input:t,output:t}:{input:{serialize:i=>i,deserialize:i=>i},output:{serialize:i=>i,deserialize:i=>i}}})();this.runtime={transformer:{serialize:t=>r.input.serialize(t),deserialize:t=>r.output.deserialize(t)},combinedTransformer:r},this.links=n.links.map(t=>t(this.runtime))}}const me={query:"query",mutate:"mutation",subscribe:"subscription"},pe=e=>me[e];function ye(e){return Y(n=>e.hasOwnProperty(n)?e[n]:n==="__untypedClient"?e:J(({path:r,args:t})=>{const i=[n,...r],a=pe(i.pop()),u=i.join(".");return e[a](u,...t)}))}function be(e){const n=new he(e);return ye(n)}const Te=be({links:[de({url:"/api/trpc"})]});function ge({initialTodoItems:e}){const[n,r]=R.useState(e),[t,i]=R.useState("");return p.jsxs(p.Fragment,{children:[p.jsx("ul",{children:n.map((a,u)=>p.jsx("li",{children:a.text},u))}),p.jsx("div",{children:p.jsxs("form",{onSubmit:async a=>{a.preventDefault(),r(u=>[...u,{text:t}]);try{await Te.onNewTodo.mutate(t),i("")}catch(u){console.error(u),r(l=>l.slice(0,-1))}},children:[p.jsx("input",{type:"text",onChange:a=>i(a.target.value),value:t,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full sm:w-auto p-2 mr-1 mb-1"}),p.jsx("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-2 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto p-2",children:"Add to-do"})]})})]})}function we(){const e=$();return p.jsxs(p.Fragment,{children:[p.jsx("h1",{children:"To-do List"}),p.jsx(ge,{initialTodoItems:e.todo})]})}const xe=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),je={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:N}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:I}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:_}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"My Vike App"}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:k}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:q}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/todo/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:xe}}};export{je as configValuesSerialized};
